


# Лабораторная работа 3

**Дисциплина:** "Системы ввода/вывода"

**Цель работы:** получить знания и навыки разработки драйверов сетевых интерфейсов для операционной системы Linux.

**Название:** "Разработка драйверов сетевых устройств"

**Вариант:** 2

**Выполнили:**

- Мухаметгалеев Даниил, P33311
- Афанасьев Даниил, P33311

## Описание функциональности драйвера

    1.1. Драйвер должен создавать виртуальный сетевой интерфейс в ОС
    Linux.
    1.2. Созданный сетевой интерфейс должен перехватывать пакеты
    родительского интерфейса (eth0 или другого).
    1.3. Сетевой интерфейс должен реализовывать логику работы с
    перехваченным трафиком в соответствии с заданиями по
    вариантам.
    1.4. Должна иметься возможность просмотра статистики работы
    созданного интерфейса.

## Инструкция по сборке
Чтобы сбилдить проект
```
make build
```
Чтобы установить модуль в систему
```
make install
```
Чтобы удалить драйвер
```
make remove
```
Чтобы отчистить директорий от файлов сборки
```
make clean
```
## Инструкция пользователя

1. Собрать модуль, инструкция см. выше
2. Установить модуль в систему, см. выше


## Примеры использования

    ip a
        vni0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN group default qlen 1000
        link/ether e6:a5:df:b3:95:0c brd ff:ff:ff:ff:ff:ff
        inet 192.168.1.156/24 brd 192.168.1.255 scope global dynamic noprefixroute vni0
        valid_lft 3069242948sec preferred_lft 3069242948sec
        inet6 fe80::4c9c:bca1:d94a:ba07/64 scope link tentative 
        valid_lft forever preferred_lft forever


    echo "test_packet" | nc -u 192.168.1.156 2222

    dmesg
        Captured UDP datagram, saddr: 192.168.1.244
    [  998.888955] daddr: 224.0.0.251
    [  999.054029] Captured UDP datagram, saddr: 192.168.1.156
    [  999.054039] daddr: 192.168.1.1
    [  999.054201] Captured UDP datagram, saddr: 192.168.1.156
    [  999.054209] daddr: 192.168.1.1
    [ 1000.554025] Captured UDP datagram, saddr: 192.168.1.156
    [ 1000.554035] daddr: 192.168.1.1
    [ 1001.104682] Captured UDP datagram, saddr: 192.168.1.244
    [ 1001.104708] daddr: 224.0.0.251
    [ 1001.104787] Captured UDP datagram, saddr: 192.168.1.244
    [ 1001.104800] daddr: 224.0.0.251
    [ 1001.603029] Captured UDP datagram, saddr: 192.168.1.244
    [ 1001.603054] daddr: 224.0.0.251
    [ 1002.106794] Captured UDP datagram, saddr: 192.168.1.244
    [ 1002.106819] daddr: 224.0.0.251
    [ 1002.106889] Captured UDP datagram, saddr: 192.168.1.244
    [ 1002.106901] daddr: 224.0.0.251
    [ 1003.054038] Captured UDP datagram, saddr: 192.168.1.156
    [ 1003.054048] daddr: 192.168.1.1
    [ 1003.054210] Captured UDP datagram, saddr: 192.168.1.156
    [ 1003.054218] daddr: 192.168.1.1
    [ 1003.315099] Captured UDP datagram, saddr: 192.168.1.156
    [ 1003.315108] daddr: 192.168.1.1
    [ 1003.315167] Captured UDP datagram, saddr: 192.168.1.156
    [ 1003.315174] daddr: 192.168.1.1
    [ 1004.107412] Captured UDP datagram, saddr: 192.168.1.244
    [ 1004.107437] daddr: 224.0.0.251
    [ 1004.107515] Captured UDP datagram, saddr: 192.168.1.244
    [ 1004.107527] daddr: 224.0.0.251
    [ 1004.304035] Captured UDP datagram, saddr: 192.168.1.156
    [ 1004.304044] daddr: 192.168.1.1
    [ 1004.304202] Captured UDP datagram, saddr: 192.168.1.156
    [ 1004.304211] daddr: 192.168.1.1
    [ 1004.408142] Captured UDP datagram, saddr: 192.168.1.236
    [ 1004.408165] daddr: 192.168.1.156


    